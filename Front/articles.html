<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestion Clientels - Suivi des nouveaux branchements </title>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="styles.css">
    <meta name="description"
        content="Solution de gestion client√®le sp√©cialis√©e dans le suivi des branchements - Cr√©ation de devis, facturation et suivi technique">
    <meta name="keywords" content="gestion client, branchements, devis, facturation, suivi technique">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            const token = sessionStorage.getItem("token");

            if (!token) {
                window.location.href = "index.html"; // üîÑ Rediriger vers la page de connexion si pas de token
            }
        });
    </script>
</head>

<body>
    <header class="header">
        <a href="#" class="logo">Logo</a>
        <nav class="navbar">
            <!-- Accueil -->
            <div class="dropdown">
                <a href="index.html" class="active">Acceuil</a>
            </div>

            <!-- Client avec sous-menu -->
            <div class="dropdown">
                <a href="clients.html">Client</a>
            </div>

            <!-- Devis avec sous-menu -->
            <div class="dropdown">
                <a href="#">Article</a>
                <div class="submenu">
                    <a href="articles.html">Cr√©er un article</a>
                    <a href="#">Liste des articles</a>
                    <a href="#">Modifier un article</a>
                </div>
            </div>

            <!-- Factures avec sous-menu -->
            <div class="dropdown">
                <a href="#">Factures</a>
                <div class="submenu">
                    <a href="#">Cr√©er une facture</a>
                    <a href="#">Liste des factures</a>
                    <a href="#">Modifier une facture</a>
                </div>
            </div>

            <!-- Contact avec sous-menu -->
            <div class="dropdown">
                <a href="#">Contact</a>
                <div class="submenu">
                    <a href="#">Nous contacter</a>
                    <a href="#">Support technique</a>
                    <a href="#">FAQ</a>
                </div>
            </div>
        </nav>
        <div class="menu-icon" onclick="toggleMenu()">
            <i class='bx bx-menu'></i>
        </div>
    </header>

    <form action="/submit-article" method="post" class="form-container" id="articleForm">
        <fieldset class="form-section">
            <legend class="form-title">Informations G√©n√©rales</legend>

            <label for="rubrique" class="form-label">Rubrique :</label>
            <select id="rubrique" name="rubrique" class="form-input" required>
                <option value="">S√©lectionnez une rubrique</option>
                <option value="terrassement">Terrassement</option>
                <option value="canalisations">Canalisations et Tuyauterie</option>
                <option value="pieces_speciales">Pi√®ces Sp√©ciales</option>
                <option value="frais_supplementaires">Frais Cautionnements</option>
                <option value="autres">Autres</option>
            </select>

            <div class="form-row">
                <div class="form-group">
                    <label for="designation" class="form-label">D√©signation :</label>
                    <input type="text" id="designation" name="designation" class="form-input" required>
                </div>             
            </div>

            <label for="materiau" class="form-label">Type de Mat√©riau :</label>
            <select id="materiau" name="materiau" class="form-input" required>
                <option value="">S√©lectionnez un mat√©riau</option>
                <option value="cuivre">Cuivre</option>
                <option value="pvc">PVC [Polychlorure de vinyle]</option>
                <option value="per">PER [ Poly√©thyl√®ne R√©ticul√©]</option>
                <option value="pehd">PEHD [Poly√©thyl√®ne Haute Densit√©]</option>
                <option value="multicouche">Multicouche</option>
                <option value="galvanis√©">Acier Galvanis√©</option>
                <option value="fonte">Fonte</option>
                <option value="inox">Acier Inoxydable</option>
                <option value="laiton">Laiton</option>
                <option value="autre">Autre</option>
            </select>
        </fieldset>

        <fieldset class="form-section">
            <legend class="form-title">Tarification</legend>

            <div id="prixContainer">
                <div class="prix-entry">
                    <label for="prix_unitaire_ht" class="form-label">Prix Unitaire HT :</label>
                    <input type="number" id="prix_unitaire_ht" name="prix_unitaire_ht" class="form-input" step="0.01"
                        required>

                    <label for="prix_fourniture" class="form-label">Prix de fourniture :</label>
                    <input type="number" id="prix_fourniture" name="prix_fourniture" class="form-input" step="0.01"
                        required>

                    <label for="prix_pose" class="form-label">Prix de pose :</label>
                    <input type="number" id="prix_pose" name="prix_pose" class="form-input" step="0.01" required>
                </div>
            </div>
        </fieldset>

        <fieldset class="form-section">
            <legend class="form-title">Caract√©ristiques Techniques</legend>
            <div id="caracteristiquesContainer">
                <div class="caracteristique-entry">
                    <select class="form-input" name="caracteristique_key">
                        <option value="">S√©lectionnez une cl√©</option>
                        <option value="Unite">Unit√© de meusure (ex:ml,m¬≤,m3)</option>
                        <option value="DN">DN [Diam√®tre]</option>
                        <option value="PN">PN [Pression nominale]</option>
                        <option value="Classe">Classe</option>
                    </select>
                    <input type="text" class="form-input" name="caracteristique_value" placeholder="Valeur (ex: 20 mm)">
                </div>
            </div>
            <button type="button" class="btn">Ajouter une caract√©ristique</button>
        </fieldset>

        <button type="submit" class="btn">Enregistrer l'article</button>
    </form>

    <script>      

        document.getElementById("articleForm").addEventListener("submit", function (event) {
            const designation = document.getElementById("designation").value;
            const prixAchat = document.getElementById("prix_unitaire_ht").value;

            if (designation.trim() === "" || prixAchat <= 0) {
                event.preventDefault(); // Bloque l'envoi du formulaire
                alert("Veuillez remplir tous les champs obligatoires et v√©rifier les prix.");
            }
        });

    </script>
    <script src="articles.js"></script>
    <footer class="footer">
        <div class="footer-content">
            <p>&copy; 2025 Gestion Client√®le. Tous droits r√©serv√©s.</p>
            <ul class="footer-links">
                <li><a href="#">Mentions l√©gales</a></li>
                <li><a href="#">Politique de confidentialit√©</a></li>
                <li><a href="#">Conditions d'utilisation</a></li>
            </ul>
        </div>
    </footer>
</body>

</html>